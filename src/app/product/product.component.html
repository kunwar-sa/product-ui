<div>
    <input type="text" [(ngModel)]="keyword" placeholder="Enter keyword to search" class="form-control" />
    <button (click)="search()" class="btn btn-primary mt-2">Search</button>
</div>

<div *ngIf="availableBrands.length > 0" class="mt-3">
    <div class="row">
        <!-- Brand Filter Dropdown -->
        <div class="col-md-6">
            <label for="brandFilter">Filter by Brand:</label>
            <select id="brandFilter" [(ngModel)]="selectedBrand" (change)="onBrandChange()" class="form-control w-auto">
                <option value="">All Brands</option>
                <option *ngFor="let brand of availableBrands" [value]="brand">
                    {{ brand }}
                </option>
            </select>
        </div>

        <!-- Sort Button -->
        <div class="col-md-6 text-right">
            <button (click)="toggleSortOrder()" class="btn btn-secondary mt-4">
                Sort by Rating ({{ sortOrder === 'asc' ? 'Ascending' : 'Descending' }})
            </button>
        </div>
    </div>
</div>

<div *ngIf="filteredProducts.length > 0" class="mt-4">
    <h2>Search Results:</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>#</th>
                <th>Title</th>
                <th>Description</th>
                <th>Category</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Rating</th>
                <th>Brand</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let product of filteredProducts; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ product.title }}</td>
                <td>{{ product.description }}</td>
                <td>{{ product.category }}</td>
                <td>{{ product.price | currency }}</td>
                <td>{{ product.stock }}</td>
                <td>{{ product.rating }}</td>
                <td>{{ product.brand }}</td>
            </tr>
        </tbody>
    </table>
</div>

<div *ngIf="filteredProducts.length === 0 && keyword" class="mt-4">
    <p>No products found.</p>
</div>